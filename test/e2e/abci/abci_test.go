package abci

import (
	"fmt"
	"os"
	"testing"

	"github.com/cometbft/cometbft/test/e2e/abci/lexer"
	"github.com/cometbft/cometbft/test/e2e/abci/parser"
)

const t1Src = "1 3 4 4 4 4 4 4 5 6 14 3 4 5 6 14 3 4 5 6 14 3 4 4 4 5 6 14 3 4 5 6 14 3 4 5 6 14 3 4 4 4 5 6 14 3 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 5 6 14 3 4 4 4 4 5 6 14 3 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 4 5 6 14 3 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 3 4 4 5 6 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 4 4 4 4 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 5 6 14 3 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 4 4 4 4 4 4 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 4 4 4 4 4 4 4 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 4 4 4 4 4 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 4 4 5 6 14 3 5 6 14 3 5 6 14 3 5 6 14 3 5 6 14 3 5 6 14 3 5 6"

func Test1(t *testing.T) {
	lexer := lexer.New([]rune(t1Src))

	_, errs := parser.Parse(lexer)
	if len(errs) > 0 {
		fail(errs)
	}

}

func fail(errs []*parser.Error) {
	ln := errs[0].Line
	fmt.Println("Parse Error:")
	for _, e := range errs {
		if e.Line == ln {
			fmt.Println(e)
		}
	}
	os.Exit(1)
}
